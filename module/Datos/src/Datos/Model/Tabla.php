<?phpnamespace Datos\Model; use Zend\Db\TableGateway\TableGateway; class Tabla {     protected $tableGateway;     public function __construct(TableGateway $tableGateway)     {         $this->tableGateway = $tableGateway;     }     public function fetchAll()     {         $resultSet = $this->tableGateway->select();         return $resultSet;     }     public function getDatos($id)     {         $id  = (int) $id;         $rowset = $this->tableGateway->select(array('id' => $id));         $row = $rowset->current();         if (!$row) {             throw new \Exception("No se encontro el Id: $id");         }         return $row;     }     public function guardarDatos(Datos $datos)     {         $data = array(             'nombre' => $datos->nombre,             'foto'  => $datos->foto,             'edad'  => $datos->edad,         );         $id = (int) $datos->id;         if ($id == 0) {             $this->tableGateway->insert($data);         } else {             if ($this->getDatos($id)) {                 $this->tableGateway->update($data, array('id' => $id));             } else {                 throw new \Exception('La persona no existe');             }         }     }     public function borrarDatos($id)     {         $this->tableGateway->delete(array('id' => (int) $id));     } }